<div>

    <div class="container inc-summ-edits pt-4">
        <div class="home-btn text-center mb-4 mb-md-0">
            <span routerLink="/invoice"> 
                <a class="btn btn-primary home-button"><i _ngcontent-oay-c20="" class="fa-solid fa-house"></i>Home</a>
            </span>
        </div>
        <div class=" boxes">
            <div class="mb-2 mb-md-0">
                <button class="edit" (click)="updateInvoice(data)">
                    <i class="fa-solid fa-pencil"></i>
                    Edit
                </button>

                <button class="edit" (click)="recordPayment(data)">
                    <i class="fa-solid fa-money-bill-wave"></i>
                    Record Payment
                </button>
            </div>
            <div>
                <button class="edit" printSectionId="print-section" ngxPrint><i class="fa-solid fa-print"></i>
                    print
                </button>

                <button class="edit" (click)="downloadInvoice()">
                    <button [class.spinner]="loading" [disabled]="loading" class="downloadbtn"><i
                            class="fa-solid fa-download"></i></button>
                        Download
                </button>
                <button class="edit" (click)="emailInvoice(data)">
                    <i class="fa-solid fa-envelope"></i>
                    email invoice
                </button>
                <div class="edit">
                    <div class="top-dropdown">
                        <i class="fa-solid fa-angle-down"></i>
                        <button class="top-dropbtn">more</button>
                        <div class="top-dropdown-content">
                            <a routerLink="/add-invoice">Create New Invoice</a>
                            <a (click)="emailInvoice(data)">Send Reminder By Email</a>
                            <a (click)="duplicateInvoice(data)">Duplicate Invoice</a>
                            <a (click)="deleteInvoices(data)">Delete Invoice</a>
                            <!-- <a *ngIf="data?.status !== data?.status.CANCELLED"
                                (click)="updateStatus(data, data?.status.CANCELLED)">Cancel Invoice</a> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <span (click)="createAnotherInvoice()"> <a class="btn btn-primary">
                <i class="las la-plus me-1"></i>
                Create another invoice</a></span>
    </div>
    <app-invoice-summary [data]="data"></app-invoice-summary>
  

    <div id="print-section">
      
        <div id="pdfHolder"
        style="width: 1000px; height:100%; background-color:#ffff; padding: 30px; padding-bottom: 5px; margin: auto; box-shadow: 0 3px 2px #e31e249e;
        border: 1px solid #ff00001f !important; border-radius: 0.375rem;">
        <table>
            <thead>
                <tr>
                    <td>
                        <table style="width: 100%;">

                            <tbody>
                                <tr class="mobile-flex">
                                    <td style="text-align: left;" class="table-img"><img [src]="invoiceImage" width="120px"
                                            height="120px" style="margin-bottom: 40px;"/>
                                    </td>
                                    <td>
                                    </td>

                                    <td style="text-align: right; vertical-align: middle;">
                                        <span class="badge badge-pill badge-primary status" [ngClass]="{
                                                           'badge-warning': data?.status === 'UNPAID',
                                                           'badge-success': data?.status === 'PAID',
                                                           'badge-danger': data?.status === 'CANCELLED'
                                                                              }">
                                            {{ data?.status }}
                                        </span>

                                        <h2 class="text-invoice" style="font-size: 34px; font-weight: 500; padding-top: 15px; padding-bottom: 40px;">Invoice</h2>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <table class="m-margin" style="width: 100%; margin-top: 10px;  margin-bottom: 40px;">
                            <tbody>
                                <tr>
                                    <td style="text-align: left; width:30%; vertical-align: top;">
                                        <div>
                                            <h4 style="font-size: 12px; margin-bottom: 18px; color: #2b2b2b; font-weight: 500;">Billed By
                                            </h4>
                                            <div>
                                                <h2
                                                    style="font-size: 14px; color: #2b2b2b; font-weight: bold;     margin: 10px 0px;">
                                                    M CODE INFOSOFT</h2>
                                                <p class="mobile-margin"
                                                    style="font-size: 12px; color: #2b2b2b; font-weight: 400; line-height: 23px; margin: 10px 0;">
                                                    #60, 1st Floor, Zirakpur,<br> Punjab, India - 140603</p>
                                                <div>
                                                    <div class="mobile-height" style="padding-bottom: 8px;">
                                                        <span
                                                            style="font-size: 12px; font-weight: 500; color: #979393;">GSTIN:</span><span
                                                            style="font-size: 12px; color: #2b2b2b; font-weight: 400; padding-left: 5px;">03DQCPK3553H1Z3</span>
                                                    </div>
                                                    <div class="mobile-height" style="padding-bottom: 8px;">
                                                        <span
                                                            style="font-size: 12px; font-weight: 500; color: #979393;">PAN:</span><span
                                                            style="font-size: 12px; color: #2b2b2b; font-weight: 400; padding-left: 5px;">DQCPK3553H</span>
                                                    </div>
                                                    <div class="mobile-height" style="padding-bottom: 0px;">
                                                        <span
                                                            style="font-size: 12px; font-weight: 500; color: #979393;">Email:</span><span
                                                            style="font-size: 12px; color: #2b2b2b; font-weight: 400; padding-left: 5px;">Info@mcodeinfosoft.com</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="text-align: left; width:30%; vertical-align: top;">
                                        <div>
                                            <h4 style="font-size: 12px; margin-bottom: 18px; color: #2b2b2b; font-weight: 500;">Billed To
                                            </h4>
                                            <div>
                                                <h2
                                                    style="font-size: 14px; color: #2b2b2b; font-weight: bold; margin: 10px 0px;">
                                                    {{data?.client?.name}}
                                                </h2>
                                                <p class="mobile-margin"
                                                    style="font-size: 12px; color: #2b2b2b; font-weight: 400; line-height: 23px; margin: 10px 0; padding-right:25px;">
                                                    {{data?.client?.address}}</p>
                                                <div>
                                                    <div class="mobile-height" style="padding-bottom: 8px;">
                                                        <span
                                                            style="font-size: 12px; font-weight: 500; color: #979393;">GSTIN:</span><span
                                                            style="font-size: 12px; color: #2b2b2b; font-weight: 400; padding-left: 5px;">{{data?.client?.gstin}}</span>
                                                    </div>
                                                    <div class="mobile-height" style="padding-bottom: 8px;">
                                                        <span
                                                            style="font-size: 12px; font-weight: 500; color: #979393;">PAN:</span><span
                                                            style="font-size: 12px; color: #2b2b2b; font-weight: 400; padding-left: 5px;">{{data?.client?.pan}}</span>
                                                    </div>

                                                    <div class="mobile-height" style="padding-bottom: 0px;">
                                                        <span
                                                            style="font-size: 12px; font-weight: 500; color: #979393;">Email:</span><span
                                                            style="font-size: 12px; color: #2b2b2b; font-weight: 400; padding-left: 5px;">{{data?.client?.email}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="text-align: left; width:30%; vertical-align: top;">
                                        <div>
                                            <h4 class="mobile-margin" style="font-size: 12px; margin-bottom: 18px; color: #2b2b2b; font-weight: 500;">Invoice
                                                Details
                                            </h4>
                                            <div class="width-mobile">
                                                <div style="padding-bottom: 10px; float: left; width: 100%;">
                                                    <span
                                                        style="font-size: 12px; font-weight: 500; color: #979393; float: left; width: 50%;">Invoice
                                                    </span><span
                                                        style="font-size: 12px; color: #2b2b2b; font-weight: 400; float: left; width: 50%;">{{data?.invoiceNo}}</span>
                                                </div>
                                                <div style="float: left; width: 100%;">
                                                    <span
                                                        style="font-size: 12px; font-weight: 500; color: #979393; float: left; width: 50%;">Invoice
                                                        Date </span><span
                                                        style="font-size: 12px; color: #2b2b2b; font-weight: 400; float: left; width: 50%;">
                                                        {{data?.date | date: 'dd-MM-yyyy'}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr class="second">
                    <td>
                        <table style="width: 100%; padding-top: 50px; margin-bottom: 40px; border-spacing: 0px;">
                            <thead>
                                <tr
                                    style="text-align: center; background-color: #F8D1D1;vertical-align: top;font-size: 12px;">
                                    <th
                                        style="width: 5%; border: 1px solid #f3a4a4; border-bottom: none;font-weight: 400; padding: 6px 8px;">
                                    </th>
                                    <ng-container *ngFor="let column of data?.table">
                                        <th *ngIf="column.fieldName !== 'description'"
                                            [ngStyle]="{'width': column.default ? '35%' : '15%', 'text-align': 'left', 'border': '1px solid #f3a4a4', 'border-bottom': 'none', 'border-left': 'none', 'font-weight': '400', 'padding': '6px 8px', 'color': '#000'}">
                                            {{column.label }}
                                        </th>
                                    </ng-container>
                                </tr>
                            </thead>

                            <tbody>
                                <tr class="mobile-left" style="text-align: center; font-size: 12px;"
                                    *ngFor="let product of products; let i = index">
                                    <td
                                        style="color: #2b2b2b; border-bottom: 1px solid #dfdddd !important; border-right: none; border-top: none; padding: 6px 8px;">
                                        {{ i + 1 }}.
                                    </td>
                                    <ng-container *ngFor="let details of table">

                                        <td class="description input-percentage"
                                            *ngIf="details.fieldName !== 'description'"
                                            style="color: #2b2b2b; border-bottom: 1px solid #dfdddd !important; text-align: left; border-bottom: 1px solid #f3a4a4; padding: 6px 8px;">
                                            <ng-container [ngSwitch]="true">
                                                <ng-container *ngSwitchCase="details.type === 'DATE'">{{datePipe.transform(product[details.fieldName],'MM-dd-yyyy')}}</ng-container>
                                                <ng-container *ngSwitchCase="details.fieldName == 'taxamount'">{{product[details.fieldName]}}%</ng-container>
                                                <ng-container *ngSwitchCase="['amount', 'rate' , 'total' , 'CURRENCY'].includes(details.fieldName)">{{currencyData}}{{product[details.fieldName]}}</ng-container>
                                                <ng-container *ngSwitchCase="details.fieldName === 'item'">
                                                    {{product[details.fieldName]}}
                                                    <span class="descriptions" 
                                                    [innerHTML]="product.description"></span>
                                                </ng-container>
                                                <ng-container *ngSwitchDefault> {{product[details.fieldName]}}</ng-container>

                                            </ng-container>
                                            
                                           
                                        </td>
                                    </ng-container>
                                </tr>
                            </tbody>

                        </table>
                    </td>
                </tr>
                <tr class="third"> 
                    <td>
                        <table style="width: 100%; padding-bottom: 50px; border-spacing: 0px;">
                            <tbody>
                                <tr>

                                    <td class="mobile-width" style="width: 55%; vertical-align: top;">
                                        <h4 style="font-size: 12px; font-weight: 500; color: #979393; margin: 0;">
                                            Declaration</h4>
                                        <p
                                            style="font-size: 12px; color: #2b2b2b; font-weight: 400; line-height: 25px; margin: 10px 80px 10px 0px; word-spacing: 2px;">
                                            We declare that this invoice shows the actual price of the goods
                                            described and that all particulars are true and correct.
                                        </p>
                                    </td>
                                    <td style="width: 40%; vertical-align: top;">
                                        <div class="mobile-width" style="float: left; width: 100%;">
                                            <span
                                                style="font-size: 12px; font-weight: 500; color: #979393; float: left; padding-left: 10px;">Amount</span>

                                            <span
                                                style="font-size: 12px; color: #2b2b2b; font-weight: 400; float: right; text-align: end; padding-right: 10px;">{{currencyData}}
                                                {{data?.subtotalofamount}}</span>

                                        </div>
                                        <div class="mobile-width" style="padding-bottom: 10px; float: left; width: 100%;">
                                            <span *ngIf="data?.tax !== 'NONE'"
                                                style="font-size: 12px; font-weight: 700; color: #979393; float: left; padding-left: 10px;">{{data?.tax}}</span>
                                            <span *ngIf="data?.tax !== 'NONE'"
                                                style="font-size: 12px; color: #282828; font-weight: 400; float: right; text-align: end; padding-right: 10px;">{{currencyData}}
                                                {{data?.totalamountoftax}}</span>
                                        </div>
                                        <div class="mobile-width-left"
                                            style="background-color: #DC1C1C; float: left; width: 100%; padding: 10px 0px;">
                                            <span
                                                style="font-size: 12px; font-weight: 400; color: #ffffff; float: left; padding-left: 10px;">Total
                                                ({{data?.currency}})</span>

                                            <span
                                                style="font-size: 12px; color: #ffffff; font-weight: 400; float: right; text-align: end; padding-right: 10px;">{{currencyData}}{{
                                                data?.totalamount !== 0 ? data?.totalamount : data?.subtotalofamount
                                                }}</span>
                                        </div>
                                        <div style="padding-top: 30px; float: left; width: 100%;">
                                            <p
                                                style="font-size: 12px; color: #2b2b2b; font-weight: 400; line-height: 29px; margin: 5px 0; word-spacing: 2px; text-transform: capitalize;">
                                                Total (in words) : {{totalInWords}}
                                            </p>
                                            <p
                                                style="font-size: 12px; color: #282828; font-weight: 400; line-height: 29px; margin: 0; word-spacing: 2px;">

                                            </p>
                                        </div>
                                    </td>
                                    <td style="width: 5%; vertical-align: top;"></td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr class="forth">
                    <td>
                        <table style="width: 100%; margin-bottom: 300px; margin-top: 40px; border-spacing: 0px;">
                            <tbody>
                                <tr>
                                    <td style="width: 50%; vertical-align: top;">
                                        <div style="float: left; width: 100%;">
                                            <h4 style="font-size: 12px; color: #282828; font-weight: 400; margin-bottom: 15px;">Bank Details
                                            </h4>
                                            <div style="float: left; width: 100%;">
                                                <div class="width-mobile" style="padding-bottom: 10px; float: left; width: 100%;">
                                                    <span
                                                        style="font-size: 12px; font-weight: 500; color: #979393; float: left; width: 37%;">Account
                                                        Holder Name</span><span
                                                        style="font-size: 12px; color: #2b2b2b; font-weight: 400; float: left; width: 63%;">M
                                                        CODE INFOSOFT</span>
                                                </div>
                                                <div class="width-mobile" style="float: left; width: 100%; padding-bottom: 10px;">
                                                    <span
                                                        style="font-size: 12px; font-weight: 500; color: #979393; float: left; width: 37%;">Account
                                                        Number</span>
                                                    <span
                                                        style="font-size: 12px; color: #2b2b2b; font-weight: 400; float: left; width: 63%;">004305006771</span>
                                                </div>
                                                <div class="width-mobile" style="float: left; width: 100%; padding-bottom: 10px;">
                                                    <span
                                                        style="font-size: 12px; font-weight: 500; color: #979393; float: left; width: 37%;">IFSC</span>
                                                    <span
                                                        style="font-size: 12px; color: #2b2b2b; font-weight: 400; float: left; width: 63%;">ICIC0000043</span>
                                                </div>
                                                <div class="width-mobile" style="float: left; width: 100%; padding-bottom: 10px;">
                                                    <span
                                                        style="font-size: 12px; font-weight: 500; color: #979393; float: left; width: 37%;">SWIFT
                                                        Code</span>
                                                    <span
                                                        style="font-size: 12px; color: #2b2b2b; font-weight: 400; float: left; width: 63%;">ICICINBBCTS</span>
                                                </div>
                                                <div class="width-mobile" style="float: left; width: 100%;">
                                                    <span
                                                        style="font-size: 12px; font-weight: 500; color: #979393; float: left; width: 37%;">Bank</span>
                                                    <span
                                                        style="font-size: 12px; color: #2b2b2b; font-weight: 400; float: left; width: 63%;">ICICI
                                                        Bank Ltd.</span>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="width: 50%;">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table style="width: 100%; border-spacing: 0px;">
                            <tbody>
                                <tr>
                                    <td style="width: 100%; text-align: center;">
                                        <p class="mobile-left"
                                            style="font-size: 12px; color: #2b2b2b; font-weight: 500; line-height: 29px; margin: 0 0 5px 0; word-spacing: 2px;">
                                            This is an electronically generated document, no signature is required.
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

        </div>

    <div class="container inc-summ-edits">
        <div class=" boxes">
            <div>
                <button class="edit" (click)="updateInvoice(data)">
                    <i class="fa-solid fa-pencil"></i>
                    Edit
                </button>

                <button class="edit" (click)="recordPayment(data)">
                    <i class="fa-solid fa-money-bill-wave"></i>
                    Record Payment
                </button>
            </div>
            <div>

                <button class="edit" printSectionId="print-section" ngxPrint><i class="fa-solid fa-print"></i>
                    print
                </button>
                <button class="edit" (click)="downloadInvoice()">
                    <button [class.spinner]="loading" [disabled]="loading" class="downloadbtn"><i
                            class="fa-solid fa-download"></i></button>
                    Download
                </button>
                <button class="edit" (click)="emailInvoice(data)">
                    <i class="fa-solid fa-envelope"></i>
                    email invoice
                </button>
                <div class="edit">
                    <div class="dropdown">
                        <i class="fa-solid fa-angle-down"></i>
                        <button class="dropbtn">More</button>
                        <div class="dropdown-content">
                            <a routerLink="/add-invoice">Create New Invoice</a>
                            <a (click)="emailInvoice(data)">Send Reminder By Email</a>
                            <a (click)="duplicateInvoice(data)">Duplicate Invoice</a>
                            <a (click)="deleteInvoices(data)">Delete Invoice</a>
                            <!-- <a *ngIf="data?.status !== data?.status.CANCELLED"
                                (click)="updateStatus(data, data?.status.CANCELLED)">Cancel Invoice</a> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<router-outlet></router-outlet>